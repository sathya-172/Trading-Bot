const { SubscriptionModes } = require("../tbtsocket/models.js")

var fyersOrderSocket= require("../index.js").fyersTbtSocket

var skt=new fyersOrderSocket("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJhcGkuZnllcnMuaW4iLCJpYXQiOjE3NDA2MzQ4MzcsImV4cCI6MTc0MDcwMjYzNywibmJmIjoxNzQwNjM0ODM3LCJhdWQiOlsieDowIl0sInN1YiI6ImFjY2Vzc190b2tlbiIsImF0X2hhc2giOiJnQUFBQUFCbnZfclY3RUhfMEM2RGwyOWhGdE9kT0tlM0c0QnctbnZ1LUNUMUdwd09HaDdBbkMxRlQ2ZVJRanFWUWl0WFI4MG1rTWZRYVJJdi11eXJJWUF6cUxsYVV1cldkMm4yRnhkVUZHMVpTN3VyWF8zOWJScz0iLCJkaXNwbGF5X25hbWUiOiJQQVRJTCBQSVlVU0ggU1VSRVNIIiwib21zIjoiSzEiLCJoc21fa2V5IjoiYTM1MmYxN2I5MmRiZTU4NTgyMzg2MmRkYjMxZWE1NTY1OGE0MTc2OTM4MmM3NDNlYTQyMjg1OGYiLCJpc0RkcGlFbmFibGVkIjoiTiIsImlzTXRmRW5hYmxlZCI6Ik4iLCJmeV9pZCI6IlhQMDE0NzAiLCJhcHBUeXBlIjoxMDEsInBvYV9mbGFnIjoiTiJ9.PY8BHrSRhIP9DD8iLmVfjQz13Nk_A0f_bLuyiUQsZjs")

skt.on("error",function (errmsg) {
    console.log(errmsg)
})
skt.on('open', function() {
    skt.subscribe(['NSE:NIFTY25FEBFUT', 'NSE:IOC25FEBFUT', 'NSE:BANKNIFTY25FEBFUT', 'NSE:FINNIFTY25FEBFUT', 'NSE:TCS25FEBFUT'], '1', SubscriptionModes.DEPTH)
    skt.switchChannel([], ['1'])
})
skt.on('depth',function (ticker, data) {
    console.log('depth',ticker, data)
})
skt.on('close',function () {
    console.log('closed')
})
skt.on('servererror',function (msg) {
    console.log('serverr', msg)
})
skt.autoreconnect()
skt.connect()

